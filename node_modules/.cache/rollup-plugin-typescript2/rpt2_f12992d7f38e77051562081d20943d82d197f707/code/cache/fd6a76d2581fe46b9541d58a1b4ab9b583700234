{"code":"import { Serializer } from './serializer/Serializer';\r\nimport { WebIfcWorker } from './workers/WebIfcWorker';\r\nimport { PropertyWorker } from './workers/PropertyWorker';\r\nimport { StateWorker } from './workers/StateWorker';\r\nimport { ParserWorker } from './workers/ParserWorker';\r\nimport { IndexedDatabase } from \"../indexedDB/IndexedDatabase\";\r\nclass IFCWorker {\r\n    constructor() {\r\n        this.serializer = new Serializer();\r\n        this.IDB = new IndexedDatabase();\r\n        this.workerState = new StateWorker(this);\r\n        this.webIfc = new WebIfcWorker(this, this.serializer);\r\n        this.properties = new PropertyWorker(this);\r\n        this.parser = new ParserWorker(this, this.serializer, this.IDB);\r\n    }\r\n    initializeAPI(api) {\r\n        this.state = {\r\n            models: [],\r\n            api,\r\n            useJSON: false,\r\n            worker: { active: false, path: '' }\r\n        };\r\n    }\r\n    post(data) {\r\n        self.postMessage(data);\r\n    }\r\n    postCallback(data, result, serializer) {\r\n        data.result = serializer ? serializer(result) : result;\r\n        this.post(data);\r\n    }\r\n}\r\nconst ifcWorker = new IFCWorker();\r\nself.onmessage = async (event) => {\r\n    const data = event.data;\r\n    const { worker, action } = data;\r\n    checkRequestIsValid(worker, action);\r\n    const requestedWorker = ifcWorker[worker];\r\n    requestedWorker[action](data);\r\n};\r\nfunction checkRequestIsValid(worker, action) {\r\n    if (!ifcWorker[worker]) {\r\n        throw new Error(`The worker ${worker} does not exist.`);\r\n    }\r\n    const requestedWorker = ifcWorker[worker];\r\n    if (!requestedWorker[action]) {\r\n        throw new Error(`The action ${action} does not exist in the worker ${worker}.`);\r\n    }\r\n}\r\n//# sourceMappingURL=IFCWorker.js.map","references":["/Users/simquat/Development/web-ifc-three/web-ifc-three/src/IFC/web-workers/BaseDefinitions.ts","/Users/simquat/Development/web-ifc-three/web-ifc-three/src/IFC/web-workers/serializer/Serializer.ts","/Users/simquat/Development/web-ifc-three/web-ifc-three/src/IFC/web-workers/workers/WebIfcWorker.ts","/Users/simquat/Development/web-ifc-three/web-ifc-three/src/IFC/BaseDefinitions.ts","/Users/simquat/Development/web-ifc-three/web-ifc-three/src/IFC/web-workers/workers/PropertyWorker.ts","/Users/simquat/Development/web-ifc-three/web-ifc-three/src/IFC/web-workers/workers/StateWorker.ts","/Users/simquat/Development/web-ifc-three/web-ifc-three/src/IFC/web-workers/workers/ParserWorker.ts","/Users/simquat/Development/web-ifc-three/web-ifc-three/src/IFC/indexedDB/IndexedDatabase.ts"],"map":"{\"version\":3,\"file\":\"IFCWorker.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/IFC/web-workers/IFCWorker.ts\"],\"names\":[],\"mappings\":\"AASA,OAAO,EAAC,UAAU,EAAC,MAAM,yBAAyB,CAAC;AACnD,OAAO,EAAC,YAAY,EAAC,MAAM,wBAAwB,CAAC;AAEpD,OAAO,EAAC,cAAc,EAAC,MAAM,0BAA0B,CAAC;AACxD,OAAO,EAAC,WAAW,EAAC,MAAM,uBAAuB,CAAC;AAClD,OAAO,EAAC,YAAY,EAAC,MAAM,wBAAwB,CAAC;AACpD,OAAO,EAAC,eAAe,EAAC,MAAM,8BAA8B,CAAC;AAE7D,MAAM,SAAS;IAUX;QATiB,eAAU,GAAG,IAAI,UAAU,EAAE,CAAC;QAU3C,IAAI,CAAC,GAAG,GAAG,IAAI,eAAe,EAAE,CAAC;QACjC,IAAI,CAAC,WAAW,GAAG,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC;QACzC,IAAI,CAAC,MAAM,GAAG,IAAI,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;QACtD,IAAI,CAAC,UAAU,GAAG,IAAI,cAAc,CAAC,IAAI,CAAC,CAAC;QAC3C,IAAI,CAAC,MAAM,GAAG,IAAI,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;IACpE,CAAC;IAED,aAAa,CAAC,GAAc;QACxB,IAAI,CAAC,KAAK,GAAG;YACT,MAAM,EAAE,EAAE;YACV,GAAG;YACH,OAAO,EAAE,KAAK;YACd,MAAM,EAAE,EAAC,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,EAAE,EAAC;SACpC,CAAC;IACN,CAAC;IAED,IAAI,CAAC,IAAS;QAEV,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;IAC3B,CAAC;IAED,YAAY,CAAC,IAAS,EAAE,MAAW,EAAE,UAAgB;QACjD,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC,CAAC,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;QACvD,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACpB,CAAC;CACJ;AAED,MAAM,SAAS,GAAG,IAAI,SAAS,EAAE,CAAC;AAElC,IAAI,CAAC,SAAS,GAAG,KAAK,EAAE,KAAmB,EAAE,EAAE;IAC3C,MAAM,IAAI,GAAG,KAAK,CAAC,IAAoB,CAAC;IACxC,MAAM,EAAC,MAAM,EAAE,MAAM,EAAC,GAAG,IAAI,CAAC;IAC9B,mBAAmB,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;IACpC,MAAM,eAAe,GAAG,SAAS,CAAC,MAAM,CAAQ,CAAC;IACjD,eAAe,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC;AAClC,CAAC,CAAC;AAEF,SAAS,mBAAmB,CAAC,MAAkB,EAAE,MAAqB;IAClE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE;QACpB,MAAM,IAAI,KAAK,CAAC,cAAc,MAAM,kBAAkB,CAAC,CAAC;KAC3D;IAED,MAAM,eAAe,GAAG,SAAS,CAAC,MAAM,CAAQ,CAAC;IAEjD,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,EAAE;QAC1B,MAAM,IAAI,KAAK,CAAC,cAAc,MAAM,iCAAiC,MAAM,GAAG,CAAC,CAAC;KACnF;AACL,CAAC\"}"}
